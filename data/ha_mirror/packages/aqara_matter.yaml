# ============================================================================
# AQARA INTEGRATION (Matter / Hub)
# ============================================================================
# Documentation:
# - Matter: https://www.home-assistant.io/integrations/matter/
# - Aqara Hub: https://www.home-assistant.io/integrations/xiaomi_aqara/
#
# Setup Instructions:
#
# OPTION A: Matter (Recommended for new devices)
# 1. Ensure Aqara devices support Matter
# 2. Configure via UI: Settings → Devices & Services → Add Integration → Matter
# 3. Scan QR code from device or enter pairing code
#
# OPTION B: Aqara Hub (M1S, M2, G2H, etc.)
# 1. Configure via UI: Settings → Devices & Services → Add Integration → Xiaomi Aqara
# 2. Enter hub IP address and gateway key (from Aqara app)
#
# OPTION C: Aqara Cloud (if using cloud API)
# 1. Get API credentials from Aqara developer portal
# 2. Add credentials to secrets.yaml
# 3. May require custom integration from HACS
# ============================================================================

# Aqara devices via Matter or Hub are configured via UI

# Example automation for Aqara motion sensor
automation:
  - id: aqara_motion_lights
    alias: "Aqara: Motion Activated Lights"
    description: "Turn on lights when motion detected by Aqara sensor"
    mode: restart
    trigger:
      - platform: state
        entity_id: binary_sensor.aqara_motion_sensor_living_room  # Replace with your entity
        to: "on"
    action:
      - service: light.turn_on
        target:
          entity_id: light.living_room
        data:
          brightness_pct: 80
      - delay:
          minutes: 5
      - service: light.turn_off
        target:
          entity_id: light.living_room

# Example for Aqara temperature/humidity sensor
sensor:
  - platform: template
    sensors:
      aqara_comfort_level:
        friendly_name: "Aqara Comfort Level"
        value_template: >
          {% set temp = states('sensor.aqara_temp_humidity_temperature') | float(20) %}
          {% set humidity = states('sensor.aqara_temp_humidity_humidity') | float(50) %}
          {% if temp >= 20 and temp <= 24 and humidity >= 40 and humidity <= 60 %}
            Comfortable
          {% elif temp < 18 %}
            Too Cold
          {% elif temp > 26 %}
            Too Hot
          {% elif humidity < 30 %}
            Too Dry
          {% elif humidity > 70 %}
            Too Humid
          {% else %}
            Moderate
          {% endif %}
