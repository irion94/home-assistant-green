# ============================================================================
# XIAOMI MI HOME INTEGRATION (Official)
# ============================================================================
# Documentation: https://www.home-assistant.io/integrations/xiaomi_miio/
#
# Setup Instructions:
# 1. Configure via UI: Settings → Devices & Services → Add Integration → Xiaomi Miio
# 2. Option A: Cloud integration (easier)
#    - Enter Xiaomi account credentials from secrets.yaml
# 3. Option B: Local control (more reliable)
#    - Find device IP and token using Mi Home app or miio-extract-tokens
#    - Add device manually via UI with IP and token
#
# Supported devices: Vacuum cleaners, air purifiers, lights, sensors, etc.
# ============================================================================

# Xiaomi integration is primarily configured via UI

# Example automation for Xiaomi vacuum
automation:
  - id: xiaomi_vacuum_schedule
    alias: "Xiaomi: Daily Vacuum Schedule"
    description: "Start vacuum cleaning at 10:00 on weekdays"
    trigger:
      - platform: time
        at: "10:00:00"
    condition:
      - condition: time
        weekday:
          - mon
          - tue
          - wed
          - thu
          - fri
    action:
      - service: vacuum.start
        target:
          entity_id: vacuum.xiaomi_vacuum_cleaner  # Replace with your entity

# Example sensor for air quality monitoring
sensor:
  - platform: template
    sensors:
      xiaomi_air_quality_status:
        friendly_name: "Air Quality Status"
        value_template: >
          {% set aqi = states('sensor.xiaomi_air_purifier_aqi') | int(0) %}
          {% if aqi <= 50 %}Good
          {% elif aqi <= 100 %}Moderate
          {% elif aqi <= 150 %}Unhealthy for Sensitive
          {% elif aqi <= 200 %}Unhealthy
          {% elif aqi <= 300 %}Very Unhealthy
          {% else %}Hazardous
          {% endif %}
