# AI Gateway Configuration Template
# Home Assistant AI Companion Device - Raspberry Pi 5
#
# Copy this file to .env and fill in your actual values:
#   cp .env.example .env
#
# IMPORTANT: Never commit .env to git - it contains secrets!

# ============================================================================
# SECURITY (Phase 1)
# ============================================================================
# Enable Docker Secrets management (recommended for production)
SECRETS_MANAGER_ENABLED=false  # Set to true after creating /run/secrets/ files

# URL Validation: Comma-separated allowed domains (empty = use defaults)
# Defaults: youtube.com, weather.com, google.com/maps, openstreetmap.org, etc.
# Add custom domains: ALLOWED_DOMAINS=youtube.com,weather.com,your-domain.com
ALLOWED_DOMAINS=

# ============================================================================
# Home Assistant Connection
# ============================================================================
# Generate a long-lived access token in HA:
# Profile -> Security -> Long-lived access tokens
# NOTE: If SECRETS_MANAGER_ENABLED=true, this will be loaded from /run/secrets/ha_token
HA_TOKEN=your-home-assistant-long-lived-access-token-here
HA_BASE_URL=http://host.docker.internal:8123

# ======================
# LLM Provider Configuration
# ======================
# Provider: "ollama" (local) or "openai" (cloud)
LLM_PROVIDER=ollama

# Ollama settings (for local LLM)
OLLAMA_BASE_URL=http://host.docker.internal:11434
OLLAMA_MODEL=qwen2.5:3b

# OpenAI settings (for cloud LLM)
# Get your API key from: https://platform.openai.com/api-keys
# NOTE: If SECRETS_MANAGER_ENABLED=true, this will be loaded from /run/secrets/openai_api_key
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini

# ======================
# STT (Speech-to-Text) Configuration
# ======================
# Provider: "vosk" (local, fast) or "whisper" (local, accurate)
STT_PROVIDER=vosk
WHISPER_MODEL=small

# Confidence thresholds
# STT: Minimum Vosk confidence to accept result (0.0-1.0, triggers Whisper fallback if below)
# Lower = more Whisper usage (slower but more accurate), Higher = more Vosk usage (faster)
STT_CONFIDENCE_THRESHOLD=0.7
INTENT_CONFIDENCE_THRESHOLD=0.8

# ======================
# TTS (Text-to-Speech) Configuration
# ======================
# Word count threshold for TTS routing (VITS vs XTTS)
TTS_SHORT_RESPONSE_LIMIT=15

# ======================
# Web Search Configuration
# ======================
# Get your API key from: https://brave.com/search/api/
# NOTE: If SECRETS_MANAGER_ENABLED=true, this will be loaded from /run/secrets/brave_api_key
BRAVE_API_KEY=your-brave-search-api-key-here

# ======================
# Wake Word Detection
# ======================
DETECTION_THRESHOLD=0.3

# ======================
# Backend Abstraction (Phase 5+)
# ======================
# Enable backend abstraction layer (decouples from Home Assistant)
USE_BACKEND_ABSTRACTION=false

# Backend adapter name: mock, homeassistant
BACKEND_ADAPTER=homeassistant

# Backend source: builtin, path, package, git
BACKEND_SOURCE=builtin

# For source=path (local development):
BACKEND_PATH=/app/adapters/home-assistant-service
# LOCAL_ADAPTER_PATH=../home-assistant-service  # Host path for docker volume mount

# For source=git (production deployment):
# BACKEND_GIT_URL=https://github.com/yourorg/home-assistant-service.git
# BACKEND_GIT_REF=main  # branch, tag, or commit

# Backend-specific configuration (JSON format):
# BACKEND_CONFIG={"base_url": "http://host.docker.internal:8123", "token": "your-token"}

# ======================
# Logging
# ======================
LOG_LEVEL=INFO
